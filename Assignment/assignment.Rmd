---
title: "R Assignment"
subtitle: Intensive Statistics Course
author:
  name: Wihan Marais
  affiliation: \text{wihanmarais@sun.ac.za} | github.com/WihanZA
date: "26 January 2022" ## Or "Lecture no."
output: 
  # html_document:
  #   keep_md: false
  #   theme: journal
  #   highlight: haddock
  #   # code_folding: show
  #   toc: yes
  #   toc_depth: 4
  #   toc_float: yes
  #   css: css/preamble.css ## For multi-col environments
  pdf_document:
    latex_engine: xelatex
    keep_tex: false ## Change to true if want keep intermediate .tex file
    toc: false
    toc_depth: 3
    dev: cairo_pdf
    # fig_width: 7 ## Optional: Set default PDF figure width
    # fig_height: 6 ## Optional: Set default PDF figure height
    extra_dependencies: ['booktabs', 'threeparttable', 'float'] # "longtable"
    includes:
      in_header: tex/preamble.tex ## For multi-col environments
    pandoc_args:
        --template=tex/mytemplate.tex ## For affiliation field. See: https://bit.ly/2T191uZ
always_allow_html: true
header-includes:
- \usepackage{siunitx}
- \usepackage{graphicx}
- \usepackage{float}
- \usepackage{cleveref}

urlcolor: blue
# mainfont: Cochineal
# sansfont: Fira Sans
# monofont: Fira Code
## Although, see: https://tex.stackexchange.com/q/294362
## Automatically knit to both formats:
knit: (function(inputFile, encoding) {
 rmarkdown::render(inputFile, encoding = encoding, 
 output_format = 'all') 
 })
---
\graphicspath{ {./images/} }
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, dpi=300, eval = FALSE)
```

## Task 1

Create a new project in which you will complete the assignment.

\verb|File > New project > New directory > New project > Choose directory location and name|

Once you have started operating from your new root folder, create a new folder named "data" in your directory. Now, generate a GitHub Document in which you will present your work and save it in you root folder.

\verb|File > New file > R Markdown > From template > GitHub Document|

This is known as README file which is typically used to describe the contents and functioning of GitHub repositories or packages. Change the \verb|title| of your new document to your student number. To generate and view the output of this R Markdown file, click the Knit button towards the top of your workspace, or Ctrl + Shift + K.

## Task 2

As you can see in the R Markdown file, headings and subheadings are indicated with \verb|##| and \verb|###|. Furthermore, the body of text is interspersed with so-called "code chunks". This is where you will be typing and executing your code. To create a new code chunk at the location of your cursor, click "Insert new code chunk" at the top of your screen, or Ctrl + Alt + I. For example:
\begin{figure}[H]
\includegraphics{chunk}
\centering
\end{figure}
The \verb|```| indicates the beginning and end of a code chunk. \verb|r| refers to the type of programming language the chunk should expect. \verb|my_code_chunk| refers to the name that you have given the relevant code chunk.

In the \verb|setup| code chunk at the start of the page, you are able to set the default settings for all code chunks' display and output in the final document. Adjust yours to reflect:
```{r defaults, eval = F}
knitr::opts_chunk$set(echo = TRUE, eval = TRUE, fig.height = 3.5, fig.width = 6)
```
This tells R Markdown to show both code and output in your final document (\verb|echo|), execute each code chunk (\verb|eval|), and to set the dimensions of your figures to $3.5 \times 6$ inches by default.

To complete the setup, load the \verb|pacman| package using \verb|library()| and use \verb|pacman::p_load()| in the \verb|setup| code chunk to install/load the following packages:
\begin{itemize}
\item tidyverse
\item huxtable
\item fixest
\item urca
\end{itemize}

## Task 3

Copy the \verb|ts_data.csv| file that I have provided you into your "data" folder. In a new code chunk, read the \verb|.csv| file and store it as data frame in your Global Environment. Use the \verb|tidyverse| syntax (aka piping) and \verb|mutate()| to change the "Year" column to the class \verb|date|. Similarly, subset the data frame to contain observations for France between the years 1985-2010. For the latter, pipe the following
```{r filter, eval = F}
%>% dplyr::filter(Year >= as.Date("1985-01-01"), Year <= "2010-01-01")
```

Make sure the data frame is arranged chronologically and perform an Augmented Dickey-Fuller test on the time series, \verb|ln_consump_pc|.

## Task 4

Copy the \verb|cs_data.csv| file that I have provided you into your "data" folder. In a new code chunk, read the \verb|.csv| file and store it as data frame in your Global Environment. Using the \verb|fixest| package, perform the following three OLS regressions
\begin{itemize}
\item \verb|wage| on \verb|x1| 
\item \verb|wage| on \verb|x1| and \verb|x2|
\item \verb|wage| on \verb|x1| and \verb|x2| and the categorical variable \verb|treat|
\end{itemize}
Save each of these models and present them in a regression table using \verb|huxreg|.

## Conclusion

Knit your completed R Markdown file and send the final \verb|.Rmd| file to wihanmarais@sun.ac.za for grading.